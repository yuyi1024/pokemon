<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Bootstrap demo</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
 
  </head>
  <body>


<p class="d-inline-flex gap-1 main-btns">
	<button class="btn btn-primary" type="button" data-bs-toggle="collapse" data-bs-target="#collapseExample1" aria-expanded="false" aria-controls="collapseExample1">
	隊伍
	</button>
	<button class="btn btn-primary" type="button" data-bs-toggle="collapse" data-bs-target="#collapseExample2" aria-expanded="false" aria-controls="collapseExample2">
	屬性相剋
	</button>
<!-- 	<button class="btn btn-primary" type="button" data-bs-toggle="collapse" data-bs-target="#collapseExample3" aria-expanded="false" aria-controls="collapseExample3">
	PM 查詢
	</button> -->
	<button class="btn btn-primary" type="button" data-bs-toggle="collapse" data-bs-target="#collapseExample4" aria-expanded="false" aria-controls="collapseExample4">
	速度線
	</button>
</p>

<div class="collapse main-card" id="collapseExample1">
	<div class="card card-body">
		<div class="btn-group" role="group" aria-label="Third group">
			<button type="button" class="btn btn-info team-btn" data-bs-toggle="collapse" data-bs-target="#collapseExample1-1" aria-expanded="false" aria-controls="collapseExample1-1"><img src="img/poke/Gardevoir.png" width="100%"></button>
			<button type="button" class="btn btn-info team-btn" data-bs-toggle="collapse" data-bs-target="#collapseExample1-2" aria-expanded="false" aria-controls="collapseExample1-2"><img src="img/poke/Arcanine-Hisui.png" width="100%"></button>
			<button type="button" class="btn btn-info team-btn" data-bs-toggle="collapse" data-bs-target="#collapseExample1-3" aria-expanded="false" aria-controls="collapseExample1-3"><img src="img/poke/Clodsire.png" width="100%"></button>
		</div>
		<div class="btn-group" role="group" aria-label="Third group">
			<button type="button" class="btn btn-info team-btn" data-bs-toggle="collapse" data-bs-target="#collapseExample1-4" aria-expanded="false" aria-controls="collapseExample1-4"><img src="img/poke/Mimikyu.png" width="100%"></button>
			<button type="button" class="btn btn-info team-btn" data-bs-toggle="collapse" data-bs-target="#collapseExample1-5" aria-expanded="false" aria-controls="collapseExample1-5"><img src="img/poke/Rotom-Wash.png" width="100%"></button>
			<button type="button" class="btn btn-info team-btn" data-bs-toggle="collapse" data-bs-target="#collapseExample1-6" aria-expanded="false" aria-controls="collapseExample1-6"><img src="img/poke/Meowscarada.png" width="100%"></button>
		</div>

		<p></p>
		<div class="collapse team-card" id="collapseExample1-1">
			<img src="img/Gardevoir-3.jpg" width="100%">
			<p></p>
			<img src="img/Gardevoir-2.jpg" width="100%">
		</div>
		<div class="collapse team-card" id="collapseExample1-2">
			<img src="img/Arcanine-Hisui-3.jpg" width="100%">
			<p></p>
			<img src="img/Arcanine-Hisui-2.jpg" width="100%">
		</div>
		<div class="collapse team-card" id="collapseExample1-3">
			<img src="img/Clodsire-3.jpg" width="100%">
			<p></p>
			<img src="img/Clodsire-2.jpg" width="100%">
		</div>
		<div class="collapse team-card" id="collapseExample1-4">
			<img src="img/Mimikyu-3.jpg" width="100%">
			<p></p>
			<img src="img/Mimikyu-2.jpg" width="100%">
		</div>
		<div class="collapse team-card" id="collapseExample1-5">
			<img src="img/Rotom-Wash-3.jpg" width="100%">
			<p></p>
			<img src="img/Rotom-Wash-2.jpg" width="100%">
		</div>
		<div class="collapse team-card" id="collapseExample1-6">
			<img src="img/Meowscarada-3.jpg" width="100%">
			<p></p>
			<img src="img/Meowscarada-2.jpg" width="100%">
		</div>
	</div>
</div>

<div class="collapse main-card" id="collapseExample2">
	<div class="card card-body">
		<img src="img/img_01.png">
		<p></p>

		<div class="btn-group" role="group" aria-label="Third group">
			<button type="button" class="btn btn-info type-btn color-一般" data-type="一般">一般</button>
			<button type="button" class="btn btn-info type-btn color-火" data-type="火">火</button>
			<button type="button" class="btn btn-info type-btn color-水" data-type="水">水</button>
			<button type="button" class="btn btn-info type-btn color-電" data-type="電">電</button>
		</div>
		<div class="btn-group" role="group" aria-label="Third group">
			<button type="button" class="btn btn-info type-btn color-草" data-type="草">草</button>
			<button type="button" class="btn btn-info type-btn color-冰" data-type="冰">冰</button>
			<button type="button" class="btn btn-info type-btn color-格鬥" data-type="格鬥">格鬥</button>
			<button type="button" class="btn btn-info type-btn color-毒" data-type="毒">毒</button>
		</div>
		<div class="btn-group" role="group" aria-label="Third group">
			<button type="button" class="btn btn-info type-btn color-地面" data-type="地面">地面</button>
			<button type="button" class="btn btn-info type-btn color-飛行" data-type="飛行">飛行</button>
			<button type="button" class="btn btn-info type-btn color-超能" data-type="超能">超能</button>
			<button type="button" class="btn btn-info type-btn color-蟲" data-type="蟲">蟲</button>
		</div>
		<div class="btn-group" role="group" aria-label="Third group">
			<button type="button" class="btn btn-info type-btn color-岩石" data-type="岩石">岩石</button>
			<button type="button" class="btn btn-info type-btn color-幽靈" data-type="幽靈">幽靈</button>
			<button type="button" class="btn btn-info type-btn color-龍" data-type="龍">龍</button>
			<button type="button" class="btn btn-info type-btn color-惡" data-type="惡">惡</button>
		</div>
		<div class="btn-group" role="group" aria-label="Third group">
			<button type="button" class="btn btn-info type-btn color-鋼" data-type="鋼">鋼</button>
			<button type="button" class="btn btn-info type-btn color-妖精" data-type="妖精">妖精</button>
		</div>
		<div class="btn-group" role="group" aria-label="Third group">
			<button type="button" class="btn btn-info type-clear-btn" style="background-color: #dedede;">Clear</button>
		</div>
	</div>
	<table id="type-result1"></table>
</div>

<div class="collapse main-card" id="collapseExample3">
	<div class="card card-body">
		<div class="btn-group" role="group" aria-label="Third group">
			<button type="button" class="btn btn-info type-btn" style="background-color: #aeaeae;" data-type="一般">一般</button>
			<button type="button" class="btn btn-info type-btn" style="background-color: #ffa767;" data-type="火">火</button>
			<button type="button" class="btn btn-info type-btn" style="background-color: #64c6f7;" data-type="水">水</button>
			<button type="button" class="btn btn-info type-btn" style="background-color: #e8d401;" data-type="電">電</button>
		</div>
		<div class="btn-group" role="group" aria-label="Third group">
			<button type="button" class="btn btn-info type-btn" style="background-color: #9ac30d;" data-type="草">草</button>
			<button type="button" class="btn btn-info type-btn" style="background-color: #60e8f4;" data-type="冰">冰</button>
			<button type="button" class="btn btn-info type-btn" style="background-color: #ef696a;" data-type="格鬥">格鬥</button>
			<button type="button" class="btn btn-info type-btn" style="background-color: #ab7acb;" data-type="毒">毒</button>
		</div>
		<div class="btn-group" role="group" aria-label="Third group">
			<button type="button" class="btn btn-info type-btn" style="background-color: #c8a841;" data-type="地面">地面</button>
			<button type="button" class="btn btn-info type-btn" style="background-color: #64a6f0;" data-type="飛行">飛行</button>
			<button type="button" class="btn btn-info type-btn" style="background-color: #ec7ff4;" data-type="超能">超能</button>
			<button type="button" class="btn btn-info type-btn" style="background-color: #51cc5a;" data-type="蟲">蟲</button>
		</div>
		<div class="btn-group" role="group" aria-label="Third group">
			<button type="button" class="btn btn-info type-btn" style="background-color: #fbc726;" data-type="岩石">岩石</button>
			<button type="button" class="btn btn-info type-btn" style="background-color: #756eb4;" data-type="幽靈">幽靈</button>
			<button type="button" class="btn btn-info type-btn" style="background-color: #fe8858;" data-type="龍">龍</button>
			<button type="button" class="btn btn-info type-btn" style="background-color: #6881d5;" data-type="惡">惡</button>
		</div>
		<div class="btn-group" role="group" aria-label="Third group">
			<button type="button" class="btn btn-info type-btn" style="background-color: #808aa5;" data-type="鋼">鋼</button>
			<button type="button" class="btn btn-info type-btn" style="background-color: #fd779a;" data-type="妖精">妖精</button>
		</div>
	</div>
</div>

<div class="collapse main-card" id="collapseExample4">
		<div class="card card-body">
			<ul id="pokemon-list" class="list-group list-group-flush">
			</ul>
		</div>
	</div>
</div>


<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="exampleModalLabel"></h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
        <div class="modal-body">
            <ul>
                <li><b>HP (H)：</b><span id="pokeHP"></span></li>
                <li>攻擊 (A)： <span id="pokeAttack"></span></li>
                <li><b>防禦 (B)：</b><span id="pokeDefense"></span></li>
                <li>特攻 (C)： <span id="pokeSpAttack"></span></li>
                <li><b>特防 (D)：</b><span id="pokeSpDefense"></span></li>
                <li>速度 (E)： <span id="pokeSpeed"></span></li>
            </ul>
            <p id="pokeType"></p>
            <table id="type-result2"></table>
        </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>


  </body>
</html>

<style type="text/css">
	.main-btns {
		margin: 10px;
	}
	.type-btn {
		width: 20%;
		margin: 2px 5px;
		border: none;
		color: #ffffff;
	}
	.team-btn {
		width: 20%;
		margin: 2px 5px;
		background-color: #eeeeee;
		border-color: #bbbbbb;
	}
	.card-body {
		border: none;
	}
	table#type-result1, table#type-result2 {
		width: 90%;
		margin-left: 5%;
	}
	table#type-result1 td, table#type-result2 td {
		border: 1px solid #dddddd;
		width: 50%;
	}
	.pm-type {
		position: absolute;
	    right: 0;
	    display: inline;
	}
	.my {
		background-color: #ffe5e5;
	}
	.effective {
		background-color: #ffe5e5;
	}
	.poke52{
		color: #000000;
		text-decoration: none;
	}

	.color-一般 {
		background-color: #9fa19f;
	}
	.color-火 {
		background-color: #e62829;
	}
	.color-水 {
		background-color: #2980ef;
	}
	.color-電 {
		background-color: #fac000;
	}
	.color-草 {
		background-color: #3fa129;
	}
	.color-冰 {
		background-color: #3fd8ff;
	}
	.color-格鬥 {
		background-color: #ff8000;
	}
	.color-毒 {
		background-color: #9141cb;
	}
	.color-地面 {
		background-color: #915121;
	}
	.color-飛行 {
		background-color: #81b9ef;
	}
	.color-超能 {
		background-color: #ef4179;
	}
	.color-蟲 {
		background-color: #91a119;
	}
	.color-岩石 {
		background-color: #afa981;
	}
	.color-幽靈 {
		background-color: #704170;
	}
	.color-龍 {
		background-color: #5060e1;
	}
	.color-惡 {
		background-color: #50413f;
	}
	.color-鋼 {
		background-color: #60a1b8;
	}
	.color-妖精 {
		background-color: #ef70ef;
	}

</style>


<script>

	// collapse 操作
	document.getElementById('collapseExample1').addEventListener('show.bs.collapse', function () {
		collapseAllMain(1);
	});
	document.getElementById('collapseExample2').addEventListener('show.bs.collapse', function () {
		collapseAllMain(2);
	});
	document.getElementById('collapseExample3').addEventListener('show.bs.collapse', function () {
		collapseAllMain(3);
	});
	document.getElementById('collapseExample4').addEventListener('show.bs.collapse', function () {
		collapseAllMain(4);
	});

	document.getElementById('collapseExample1-1').addEventListener('show.bs.collapse', function () {
		collapseAllTeam();
	});
	document.getElementById('collapseExample1-2').addEventListener('show.bs.collapse', function () {
		collapseAllTeam();
	});
	document.getElementById('collapseExample1-3').addEventListener('show.bs.collapse', function () {
		collapseAllTeam();
	});
	document.getElementById('collapseExample1-4').addEventListener('show.bs.collapse', function () {
		collapseAllTeam();
	});
	document.getElementById('collapseExample1-5').addEventListener('show.bs.collapse', function () {
		collapseAllTeam();
	});
	document.getElementById('collapseExample1-6').addEventListener('show.bs.collapse', function () {
		collapseAllTeam();
	});

	function collapseAllMain(num) {
		for(let i = 1; i <= 4; i ++) {
			let instanceMain = bootstrap.Collapse.getInstance(document.getElementById('collapseExample' + i));
			if(instanceMain && num != i) instanceMain.hide();
		}
	}

	function collapseAllTeam() {
		for(let i = 1; i <= 6; i ++) {
			let instancelTeam = bootstrap.Collapse.getInstance(document.getElementById('collapseExample1-' + i));
			if(instancelTeam) instancelTeam.hide();
		}
	}


	// 屬性傷害倍率
	const typeEffectiveness = {
	  "一般": {"一般": 1, "火": 1, "水": 1, "電": 1, "草": 1, "冰": 1, "格鬥": 1, "毒": 1, "地面": 1, "飛行": 1, "超能": 1, "蟲": 1, "岩石": 0.5, "幽靈": 0, "龍": 1, "惡": 1, "鋼": 0.5, "妖精": 1},
	  "火": {"一般": 1, "火": 0.5, "水": 0.5, "電": 1, "草": 2, "冰": 2, "格鬥": 1, "毒": 1, "地面": 1, "飛行": 1, "超能": 1, "蟲": 2, "岩石": 0.5, "幽靈": 1, "龍": 0.5, "惡": 1, "鋼": 2, "妖精": 1},
	  "水": {"一般": 1, "火": 2, "水": 0.5, "電": 1, "草": 0.5, "冰": 1, "格鬥": 1, "毒": 1, "地面": 2, "飛行": 1, "超能": 1, "蟲": 1, "岩石": 2, "幽靈": 1, "龍": 0.5, "惡": 1, "鋼": 1, "妖精": 1},
	  "電": {"一般": 1, "火": 1, "水": 2, "電": 0.5, "草": 0.5, "冰": 1, "格鬥": 1, "毒": 1, "地面": 0, "飛行": 2, "超能": 1, "蟲": 1, "岩石": 1, "幽靈": 1, "龍": 0.5, "惡": 1, "鋼": 1, "妖精": 1},
	  "草": {"一般": 1, "火": 0.5, "水": 2, "電": 1, "草": 0.5, "冰": 1, "格鬥": 1, "毒": 0.5, "地面": 2, "飛行": 0.5, "超能": 1, "蟲": 0.5, "岩石": 2, "幽靈": 1, "龍": 0.5, "惡": 1, "鋼": 0.5, "妖精": 1},
	  "冰": {"一般": 1, "火": 0.5, "水": 0.5, "電": 1, "草": 2, "冰": 0.5, "格鬥": 1, "毒": 1, "地面": 2, "飛行": 2, "超能": 1, "蟲": 1, "岩石": 1, "幽靈": 1, "龍": 2, "惡": 1, "鋼": 0.5, "妖精": 1},
	  "格鬥": {"一般": 2, "火": 1, "水": 1, "電": 1, "草": 1, "冰": 2, "格鬥": 1, "毒": 0.5, "地面": 1, "飛行": 0.5, "超能": 0.5, "蟲": 0.5, "岩石": 2, "幽靈": 0, "龍": 1, "惡": 2, "鋼": 2, "妖精": 0.5},
	  "毒": {"一般": 1, "火": 1, "水": 1, "電": 1, "草": 2, "冰": 1, "格鬥": 1, "毒": 0.5, "地面": 0.5, "飛行": 1, "超能": 1, "蟲": 1, "岩石": 0.5, "幽靈": 0.5, "龍": 1, "惡": 1, "鋼": 0, "妖精": 2},
	  "地面": {"一般": 1, "火": 2, "水": 1, "電": 2, "草": 0.5, "冰": 1, "格鬥": 1, "毒": 2, "地面": 1, "飛行": 0, "超能": 1, "蟲": 0.5, "岩石": 2, "幽靈": 1, "龍": 1, "惡": 1, "鋼": 2, "妖精": 1},
	  "飛行": {"一般": 1, "火": 1, "水": 1, "電": 0.5, "草": 2, "冰": 1, "格鬥": 2, "毒": 1, "地面": 1, "飛行": 1, "超能": 1, "蟲": 2, "岩石": 0.5, "幽靈": 1, "龍": 1, "惡": 1, "鋼": 0.5, "妖精": 1},
	  "超能": {"一般": 1, "火": 1, "水": 1, "電": 1, "草": 1, "冰": 1, "格鬥": 2, "毒": 1, "地面": 1, "飛行": 1, "超能": 0.5, "蟲": 1, "岩石": 1, "幽靈": 1, "龍": 1, "惡": 0, "鋼": 0.5, "妖精": 1},
	  "蟲": {"一般": 1, "火": 0.5, "水": 1, "電": 1, "草": 2, "冰": 1, "格鬥": 0.5, "毒": 0.5, "地面": 1, "飛行": 0.5, "超能": 2, "蟲": 1, "岩石": 1, "幽靈": 0.5, "龍": 1, "惡": 2, "鋼": 0.5, "妖精": 0.5},
	  "岩石": {"一般": 1, "火": 2, "水": 1, "電": 1, "草": 1, "冰": 2, "格鬥": 0.5, "毒": 1, "地面": 0.5, "飛行": 2, "超能": 1, "蟲": 2, "岩石": 1, "幽靈": 1, "龍": 1, "惡": 1, "鋼": 0.5, "妖精": 1},
	  "幽靈": {"一般": 0, "火": 1, "水": 1, "電": 1, "草": 1, "冰": 1, "格鬥": 1, "毒": 1, "地面": 1, "飛行": 1, "超能": 2, "蟲": 1, "岩石": 1, "幽靈": 2, "龍": 1, "惡": 0.5, "鋼": 1, "妖精": 1},
	  "龍": {"一般": 1, "火": 1, "水": 1, "電": 1, "草": 1, "冰": 1, "格鬥": 1, "毒": 1, "地面": 1, "飛行": 1, "超能": 1, "蟲": 1, "岩石": 1, "幽靈": 1, "龍": 2, "惡": 1, "鋼": 0.5, "妖精": 0},
	  "惡": {"一般": 1, "火": 1, "水": 1, "電": 1, "草": 1, "冰": 1, "格鬥": 0.5, "毒": 1, "地面": 1, "飛行": 1, "超能": 2, "蟲": 1, "岩石": 1, "幽靈": 2, "龍": 1, "惡": 0.5, "鋼": 1, "妖精": 0.5},
	  "鋼": {"一般": 1, "火": 0.5, "水": 0.5, "電": 0.5, "草": 1, "冰": 2, "格鬥": 1, "毒": 1, "地面": 1, "飛行": 1, "超能": 1, "蟲": 1, "岩石": 2, "幽靈": 1, "龍": 1, "惡": 1, "鋼": 0.5, "妖精": 2},
	  "妖精": {"一般": 1, "火": 0.5, "水": 1, "電": 1, "草": 1, "冰": 1, "格鬥": 2, "毒": 0.5, "地面": 1, "飛行": 1, "超能": 1, "蟲": 1, "岩石": 1, "幽靈": 1, "龍": 2, "惡": 2, "鋼": 0.5, "妖精": 1}
	};



	// 計算傷害倍率的函數
	function calculateDamageMultiplier(attackType, defenseTypes) {
	  let multiplier = 1;
	  defenseTypes.forEach(defenseType => {
	    multiplier *= typeEffectiveness[attackType][defenseType];
	  });
	  return multiplier;
	}

	// 測試案例
	// console.log(calculateDamageMultiplier("火", ["冰", "蟲"]));
	// console.log(calculateDamageMultiplier("一般", ["幽靈", "毒"]));
	// console.log(calculateDamageMultiplier("幽靈", ["一般"]));
	// console.log(calculateDamageMultiplier("妖精", ["鋼", "毒"]));
	// console.log(calculateDamageMultiplier("龍", ["龍"]));




	// 計算防禦方傷害倍率的函數
	function listDamageMultipliers(defenseTypes) {
	  const results = [];

	  // 遍歷所有攻擊屬性
	  for (const attackType in typeEffectiveness) {
	    let multiplier = 1;

	    // 計算防禦方屬性的累乘倍率
	    defenseTypes.forEach(defenseType => {
	      multiplier *= typeEffectiveness[attackType][defenseType];
	    });

	    // 將結果存入 results 陣列
	    results.push({ attackType, multiplier });
	  }

	  // 按倍率從大到小排序
	  results.sort((a, b) => b.multiplier - a.multiplier);

	  return results;
	}

	// 測試案例
	// console.log(listDamageMultipliers(["冰", "蟲"]));
	// console.log(listDamageMultipliers(["一般"]));



	// 屬性相剋觸發
	const typeButtons = document.querySelectorAll('.type-btn');
	let selectedTypes = [];


	document.querySelectorAll('.type-clear-btn').forEach(button => {
 		button.addEventListener('click', () => {
 			selectedTypes = [];
 			const resultDiv = document.getElementById('type-result1');
 			resultDiv.innerHTML = '';
 		});
	});

	// 為每個按鈕添加事件監聽器
	typeButtons.forEach(button => {
	  button.addEventListener('click', () => {
	    const defenseType = button.getAttribute('data-type');

	    // 若已選擇了兩個屬性，則不再添加
	    if (!selectedTypes.includes(defenseType)) {
	      selectedTypes.push(defenseType);
	    }

	    // 如果選擇了一個屬性，顯示所有屬性對該屬性的傷害倍率
	    if (selectedTypes.length === 1) {
	      const results = listDamageMultipliers(selectedTypes);
	      displayResults(results, 1);
	    } 
	    // 如果選擇了兩個屬性，顯示所有屬性對這兩個屬性的乘積結果
	    else if (selectedTypes.length === 2) {
	      const combinedResults = calculateCombinedResults(selectedTypes);
	      displayCombinedResults(combinedResults, 1);
	      selectedTypes = []; // 重置選擇以便重新選擇
	    }
	  });
	});

	// 顯示單個屬性的所有倍率
	function displayResults(results, num) {
	  const table = document.getElementById('type-result' + num);
	  let tr = `<br>屬性 <span class="badge rounded-pill color-${selectedTypes[0]}">${selectedTypes[0]}</span>：<br>`;

	  // console.log('屬性 "' + selectedTypes[0] + '" 的傷害倍率：');

	  results.forEach(result => {
  		const specialClass = (result.multiplier == 2 || result.multiplier == 4) ? "effective" : "";
  		tr += `<tr class="${specialClass}"><td><span class="badge rounded-pill color-${result.attackType}">${result.attackType}</span></td><td>${result.multiplier}</td></tr>`;

	  });

	  table.innerHTML = tr;
	}

	// 計算兩個屬性對所有其他屬性的乘積結果
	function calculateCombinedResults(selectedTypes) {
	  const results = listDamageMultipliers(selectedTypes);
	  const combinedResults = [];

	  for (const result of results) {
	    const attackType = result.attackType;
	    const multiplier = result.multiplier;

	    // 計算乘積
	    const newMultiplier = 
	                          (typeEffectiveness[attackType][selectedTypes[0]]) * 
	                          (typeEffectiveness[attackType][selectedTypes[1]]);
	    combinedResults.push({ attackType, multiplier: newMultiplier });
	  }

	  return combinedResults;
	}

	// 顯示兩個屬性相乘的結果
	function displayCombinedResults(combinedResults, num) {
	  const table = document.getElementById('type-result' + num);
	  let tr = `<br>屬性 <span class="badge rounded-pill color-${selectedTypes[0]}">${selectedTypes[0]}</span>&nbsp;<span class="badge rounded-pill color-${selectedTypes[1]}">${selectedTypes[1]}</span>：<br>`;

	  combinedResults.forEach(result => {
	  	const specialClass = (result.multiplier == 2 || result.multiplier == 4) ? "effective" : "";
	  	tr += `<tr class="${specialClass}"><td><span class="badge rounded-pill color-${result.attackType}">${result.attackType}</span><td>${result.multiplier}</td></tr>`;
	  });
	  table.innerHTML = tr;
	}



const pokemonData = [
	{ name: "賽富豪", types: ["鋼", "幽靈"], ability: [87	,60,95,133,91,84], speed: 84, img: "img/poke/72f68c5cd2f9f0825690aa993a10ea18834b3190.png" },
	{ name: "快龍", types: ["龍", "飛行"], ability: [91,134,95,100,100,80], speed: 80, img: "img/poke/ecdc5527d67488c92c242e34458844fe2afac525.png" },
	{ name: "長毛巨魔", types: ["惡", "妖精"], ability: [95,120,65,95,75,60], speed: 60, img: "img/poke/8279a9876d26f23c9491a6219ada140f6016c1a6.png" },
	{ name: "月月熊（赫月）", types: ["一般", "地面"], ability: [113,70,120,135,65,52], speed: 52, img: "img/poke/c766946543ce8501fad247fed6c246200eaadbfb.png" },
	{ name: "月月熊", types: ["一般", "地面"], ability: [130,140,105,45,80,50], speed: 50, img: "img/poke/eddf16bd8b2bac5f30f5a93bb1f1b25cfabb1e08.png" },
	{ name: "多龍巴魯托", types: ["龍", "幽靈"], ability: [88,120,75,100,75,142,], speed: 142, img: "img/poke/721ba56bc5288de03b8b1fc4142797fe04dcd62a.png" },
	{ name: "鋁鋼橋龍", types: ["龍", "鋼"], ability: [90,105,130,125,65,85], speed: 85, img: "img/poke/918499e695fb336ec487ff306eb77a836eaafcba.png" },
	{ name: "三首惡龍", types: ["龍", "惡"], ability: [92,105,90,125,90,98], speed: 98, img: "img/poke/072285cb2f79f560e25fce81cc981a7432fa0123.png" },
	{ name: "巨鍛匠", types: ["鋼", "妖精"], ability: [85,75,77,70,105,94], speed: 78, img: "img/poke/98decc8ad1267a1286fd44958b37080ad75dd079.png" },
	{ name: "岩石巨靈", types: ["岩石"], ability: [100,100,130,45,90,35], speed: 35, img: "img/poke/7f0f14cc32ba8a3c8e98de94418de49cb8a07046.png" },
	{ name: "吃吼霸", types: ["水"], ability: [150,100,115,65,65,35], speed: 35, img: "img/poke/03b216f0422d99365e9d6e168c5a4054c7e46503.png" },
	{ name: "大紐拉（洗翠）", types: ["惡", "格鬥"], ability: [80,130,60,40,80,120], speed:120 , img: "img/poke/1b8a26a4a56f0f053a684d851212a9afdbd0b165.png" },
	{ name: "焰后蜥", types: ["毒", "火"], ability: [68,64,60,111,60,117], speed: 117, img: "img/poke/3b405b659d284efd18f8d36bf43f2ecfcb9f8cf1.png" },
	{ name: "電蜘蛛", types: ["蟲", "電"], ability: [70,77,60,97,60,108], speed: 108, img: "img/poke/184e143b71359d9010bf9cbcf6bf526202281ec0.png" },
	{ name: "鍬農炮蟲", types: ["電", "蟲"], ability: [77,70,90,145,75,43], speed: 43, img: "img/poke/cffb8c97372158d1007c845119409df43a0f5981.png" },
	{ name: "烈咬陸鯊", types: ["龍", "地面"], ability: [108,130,95,80,85,102], speed: 102, img: "img/poke/d4d0ef0113d937d63f150354bd7a1869b36f33ea.png" },
	{ name: "噴火龍", types: ["火", "飛行"], ability: [78,84,78,109,85,100], speed: 100, img: "img/poke/2050f1fd1283f473d7d048f8631712e7e003f802.png" },
	{ name: "妙蛙花", types: ["草", "毒"], ability: [80,82,83,100,100,80], speed: 80, img: "img/poke/0186d64c5773c8d3d03cd05dc79574b2d2798d4f.png" },
	{ name: "彩粉蝶", types: ["蟲", "飛行"], ability: [80,52,50,90,50,89], speed: 89, img: "img/poke/adbc56b774dfcc830e2a2cd976e42d4cc68bae03.png" },
	{ name: "轟雷金剛猩", types: ["草", "惡"], ability: [100,125,90,60,70,85], speed: 85, img: "img/poke/27d88f3c80242866397ec4170552f70cb9eec0c8.png" },
	{ name: "赤焰咆哮虎", types: ["火", "惡"], ability: [95,115,90,80,90,60], speed: 60, img: "img/poke/9e3219183dcd98f25b088b30856a74fd49dbd235.png" },
	{ name: "暴鯉龍", types: ["水", "飛行"], ability: [95,125,79,60,100,81], speed: 81, img: "img/poke/ee070a971884e2c4da87d7a728e5821f9636f56d.png" },
	{ name: "禿鷹娜", types: ["惡", "飛行"], ability: [110,65,105,55,95,80], speed: 80, img: "img/poke/e6c54076ac21ca45a8d745c6a8adf2a426f30a06.png" },
	{ name: "水晶燈火靈", types: ["幽靈", "火"], ability: [60,55,90,145,90,80], speed: 80, img: "img/poke/6c591295dc0e5ce2d2a6835fc5e01f0123401a10.png" },
	{ name: "幽尾玄魚", types: ["水", "幽靈"], ability: [120,112,65,80,75,78], speed: 78, img: "img/poke/658829cb6dc26528b731f83fab7b3f241f6e96fa.png" },
	{ name: "來悲粗茶", types: ["草", "幽靈"], ability: [71,60,106,121,80,70], speed: 70, img: "img/poke/57c6855b6863c8a46cf771a5f1518cd6a2d133e8.png" },
	{ name: "蚊香蛙皇", types: ["水"], ability: [90,75,75,90,100,70], speed: 70, img: "img/poke/4b33c4f3411bb63fc80d5d149c64b1621a689e36.png" },
	{ name: "艾路雷朵", types: ["超能", "格鬥"], ability: [68,125,65,65,115,80], speed: 80, img: "img/poke/20b55228e9d4c4160aed8b25cffbb2be48b80a16.png" },
	{ name: "大嘴鷗", types: ["水", "飛行"], ability: [60,50,100,95,70,65], speed: 65, img: "img/poke/7c464b5870010c09f605c00e1589cacd1463335b.png" },
	{ name: "巨鉗螳螂", types: ["蟲", "鋼"], ability: [70,130,100,55,80,65], speed: 65, img: "img/poke/00f9b6fc77b07974b842263e7077e8381edaec55.png" },
	{ name: "西獅海壬", types: ["水", "妖精"], ability: [80,74,74,26,116,60], speed: 60, img: "img/poke/8fc52146f5b8a62bbfe3f6998f75b743b7e7c4c4.png" },
	{ name: "瑪麗露力", types: ["水", "妖精"], ability: [100,50,80,60,80,50], speed: 50, img: "img/poke/3ca1ab344f1f2e9c537268a453a03d2fcaa9f74a.png" },
	{ name: "蜜集大蛇", types: ["草", "龍"], ability: [106,80,110,120,80,44], speed: 44, img: "img/poke/393ca6d6fc72b016e991c0437f9651f9f20ec2ce.png" },
	{ name: "煤碳龜", types: ["火"], ability: [70,85,140,85,70,20], speed: 20, img: "img/poke/f838f5040357a632ffd49172e050e279da79aebb.png" },
	{ name: "多邊獸II", types: ["一般"], ability: [85,80,90,105,95,60], speed: 60, img: "img/poke/e0cf20200e19405d7cffd0940e0380f5725e0451.png" },
	{ name: "君主蛇", types: ["草"], ability: [75,75,95,75,95,113], speed: 113, img: "img/poke/fa33acbef6766bfd3829d8ef803b058b19e5e76b.png" },
	{ name: "帝王拿波", types: ["水", "鋼"], ability: [84,86,88,111,101,60], speed: 60, img: "img/poke/b9315248eb858f1d27c2820c3143f0592981a8c9.png" },
	{ name: "閃焰王牌", types: ["火"], ability: [80,116,75,65,75,119], speed: 119, img: "img/poke/75ba01425af3c244c3960ab85c30ce9b9201fdad.png" },
	{ name: "水箭龜", types: ["水"], ability: [79,83,100,85,105,78], speed: 78, img: "img/poke/2fe157db59153af8abd636ab03c7df6f28b08242.png" },
	{ name: "火神蛾", types: ["火", "蟲"], ability: [85,60,65,135,105,100], speed: 100, img: "img/poke/40bed77fa79926f97a5dbb32103449377879feca.png" },
	{ name: "鋼鎧鴉", types: ["鋼", "飛行"], ability: [98,87,105,53,85,67], speed: 67, img: "img/poke/3435d3dd88eef664574a8fb11dafc14be27f62e6.png" },
	{ name: "斗笠菇", types: ["草", "格鬥"], ability: [60,130,80,60,60,70], speed: 70, img: "img/poke/3aa8c625ee9c1d0dee559a73d8d4ea455aaea785.png" },
	{ name: "敗露球菇", types: ["草", "毒"], ability: [114,85,70,85,80,30], speed: 30, img: "img/poke/0e85da4945fbe5276bfdf1569b9bf47ad0021a43.png" },
	{ name: "暴飛龍", types: ["龍", "飛行"], ability: [95,135,80,110,80,100], speed: 100, img: "img/poke/1b6da69201f81f16752be61288bbb07575b71113.png" },
	{ name: "烈腿蝗", types: ["蟲", "惡"], ability: [71,102,78,52,55,92], speed: 92, img: "img/poke/5da8f512523759232f743f19421d15ae31ada198.png" },
	{ name: "劈斧螳螂", types: ["蟲", "岩石"], ability: [70,135,95,45,70,85], speed: 85, img: "img/poke/15f47a5d0acb307ac834b6646c44877bbabdd524.png" },
	{ name: "九尾", types: ["火"], ability: [79,76,75,81,100,100], speed: 100, img: "img/poke/cc96e6a4eee980724ebd725bb8785334d3290074.png" },
	{ name: "冰九尾", types: ["冰", "妖精"], ability: [73,67,75,81,100,109], speed: 109, img: "img/poke/397b20ea73c8358185d6f1d2971b5825b0cb0baf.png" },
	{ name: "火焰雞", types: ["火", "格鬥"], ability: [80,120,70,110,70,80], speed: 80, img: "img/poke/947ff39f80129baca28d55a25cda84dc47087ecd.png" },
	{ name: "紅蓮鎧騎", types: ["火", "超能"], ability: [85,60,100,125,80,75], speed: 75, img: "img/poke/5114ee078d4b2fd3e083bfd4069891a129b96070.png" },
	{ name: "蒼炎刃鬼", types: ["火", "幽靈"], ability: [75,125,80,60,100,85], speed: 85, img: "img/poke/083849988ea741cfc3eef726f08c340a13989c85.png" },
	{ name: "戟脊龍", types: ["龍", "冰"], ability: [115,145,92,75,86,87], speed: 87, img: "img/poke/af713b7e6c28234773dd6079505e00ed3a7e57d9.png" },
	{ name: "烈箭鷹", types: ["火", "飛行"], ability: [78,81,71,74,69,126], speed: 126, img: "img/poke/6bc085a6abce6d0ae3bc07907722e3e5b057431a.png" },
	{ name: "狂歡浪舞鴨", types: ["水", "格鬥"], ability: [85,120,80,85,75,85], speed: 85, img: "img/poke/0e6fc3d2671b53b10ba6b9422e3c65c031e351f5.png" },
	{ name: "風速狗", types: ["火"], ability: [90,110,80,100,80,95], speed: 95, img: "img/poke/7ef9e71e9dc624e5558d7b4619f75ea8659eff55.png" },
	{ name: "摔角鷹人", types: ["格鬥", "飛行"], ability: [78,92,75,74,63,118], speed: 118, img: "img/poke/a0e0558d9cfc881488ea24d3d6c061a5c8fae3a1.png" },
    { name: "大劍鬼（洗翠）", types: ["水", "惡"], ability: [90, 108, 80, 100, 65, 85], speed: 85, img: "img/poke/df440c4003ec729107ce7e99da937720bc4b5afa.png" },
    { name: "裙兒小姐（洗翠）", types: ["草", "格鬥"], ability: [70, 105, 75, 50, 75, 105], speed: 105, img: "img/poke/f91367db238603ca035b9095c16ea006661a9057.png" },
    { name: "索羅亞克（洗翠）", types: ["一般", "幽靈"], ability: [55, 100, 60, 125, 60, 110], speed: 110, img: "img/poke/d69b628e2eaffb69aef999d83997a62215a3f749.png" },
    { name: "勇士雄鷹（洗翠）", types: ["超能", "飛行"], ability: [110, 83, 70, 112, 70, 65], speed: 65, img: "img/poke/4f3f151beb98164344f3d2ae33eb62af1ef8715b.png" },
    { name: "黏美龍（洗翠）", types: ["鋼", "龍"], ability: [80, 100, 100, 110, 150, 60], speed: 60, img: "img/poke/602adf763139e0297f063683c09c3e90a9225d56.png" },
    { name: "狙射樹梟（洗翠）", types: ["格鬥", "草"], ability: [88, 112, 80, 95, 80, 60], speed: 60, img: "img/poke/8e6f5173ce373fd703d6d3775dacc998e360ff1a.png" },
    { name: "呆殼獸（伽勒爾）", types: ["毒", "超能"], ability: [95, 100, 95, 100, 70, 30], speed: 30, img: "img/poke/3862fc122debc9675749142a7c76f1a64dbbc60d.png" },
    { name: "呆殼獸", types: ["水", "超能"], ability: [95, 75, 110, 100, 80, 30], speed: 30, img: "img/poke/4d93d1171a1b9551989b17b4ae6838e4e9e98378.png" },
    { name: "刺甲貝", types: ["水", "冰"], ability: [50, 95, 180, 85, 45, 70], speed: 70, img: "img/poke/d5ebac9e1afe16f2a1d16a7593e022fc576aed9e.png" },
    { name: "耿鬼", types: ["幽靈", "毒"], ability: [60, 65, 60, 130, 75, 110], speed: 110, img: "img/poke/47549471dc54feb8acd4b3de3a27ea8e9e9fd25c.png" },
    { name: "頑皮雷彈（洗翠）", types: ["草", "電"], ability: [60, 50, 70, 80, 80, 150], speed: 150, img: "img/poke/7b4d67f2933c0c43ad2258adf5386bd9d7fda8f8.png" },
    { name: "肯泰羅（帕底亞）", types: ["鬥", "火"], ability: [75, 110, 105, 30, 70, 100], speed: 100, img: "img/poke/203138ff222cf647d05410923dc39147882e1a50.png" },
    { name: "班基拉斯", types: ["岩石", "惡"], ability: [100, 134, 110, 95, 100, 61], speed: 61, img: "img/poke/9fbe8d7d76096b418aa495e0ceb6e284e612a081.png" },
    { name: "晶光花", types: ["岩石", "毒"], ability: [83, 55, 90, 130, 81, 86], speed: 86, img: "img/poke/f504a50e798fb55a3b21221096e3d101779e1b84.png" },
    { name: "拖拖蚓", types: ["鋼"], ability: [70, 85, 145, 60, 55, 65], speed: 65, img: "img/poke/f4c261911d75fe64b15c06c45a72598488736d38.png" },
    { name: "海豚俠", types: ["水"], ability: [100, 160, 97, 106, 87, 100], speed: 100, img: "img/poke/2bb1c88583e97cfdbeaca57e6b1055584960ad27.png" },
    { name: "流氓鱷", types: ["惡", "地面"], ability: [95, 117, 80, 65, 70, 92], speed: 92, img: "img/poke/8892641984b53913c621294dbe85ca6ec7103ff9.png" },
    { name: "自爆磁怪", types: ["電", "鋼"], ability: [70, 70, 115, 130, 90, 60], speed: 60, img: "img/poke/2ab2b39586d0d13a9f5bbb10bbc5ca7acfd1b87d.png" },
    { name: "棄世猴", types: ["格鬥", "幽靈"], ability: [110, 115, 80, 50, 90, 90], speed: 90, img: "img/poke/6db2e14221638f77e9b00fa88aa883f154545304.png" },
    { name: "電肚蛙", types: ["電"], ability: [109, 64, 91, 103, 83, 45], speed: 45, img: "img/poke/d6b0160b62d78965c1eed9599624238a3001af9b.png" },
    { name: "骨紋巨聲鱷", types: ["火", "幽靈"], ability: [104, 75, 100, 110, 75, 66], speed: 66, img: "img/poke/5431436748270d3361995b1c59f280b42c4ce3ac.png" },
    { name: "花療環環", types: ["妖精"], ability: [51, 52, 90, 82, 110, 100], speed: 100, img: "img/poke/dcb71456401fed865508875367a8690e67661bdc.png" },
	
	{ name: "土王", types: ["地面", "毒"], ability: [130,75,60,45,100,20], speed: 20, img: "img/poke/Clodsire.png" },
	{ name: "謎擬Q", types: ["幽靈", "妖精"], ability: [55,90,80,50,105,96], speed: 96, img: "img/poke/Mimikyu.png" },
	{ name: "沙奈朵", types: ["超能", "妖精"], ability: [68,65,65,125,115,80], speed: 80, img: "img/poke/Gardevoir.png" },
	{ name: "魔幻假面喵", types: ["草", "惡"], ability: [76,110,70,81,70,123], speed: 123, img: "img/poke/Meowscarada.png" },
	{ name: "風速狗（洗翠）", types: ["火", "岩石"], ability: [95,115,80,95,80,90], speed: 90, img: "img/poke/Arcanine-Hisui.png" },
	{ name: "洛托姆（清洗）", types: ["電", "水"], ability: [50,65,107,105,107,86], speed: 86, img: "img/poke/Rotom-Wash.png" }
];

	const myPokemons = ["土王", "謎擬Q", "沙奈朵", "魔幻假面喵", "風速狗（洗翠）", "洛托姆（清洗）"];


	// 按速度降序排列
	const sortedPokemonData = pokemonData.sort((a, b) => b.speed - a.speed);

	// 將數據生成 <li> 元素
	const generatePokemonListItems = (pokemonList) => {
	  return pokemonList.map(pokemon => {

	    const isMyPokemon = myPokemons.includes(pokemon.name);
	    const specialClass = isMyPokemon ? "my" : "";


	    // 生成每個屬性的 span 標籤
	    const typesHtml = pokemon.types.map(type => 
	      `<span class="badge rounded-pill color-${type}">${type}</span>&nbsp;`
	    ).join('');

	    return `
	      <li class="list-group-item ${specialClass}">
	        <span class="badge rounded-pill text-bg-primary">${pokemon.speed}</span>
	        
        	<a href="#" data-bs-toggle="modal" data-bs-target="#exampleModal" data-name="${pokemon.name}" data-ability="${pokemon.ability}" data-type="${pokemon.types}"><img src="${pokemon.img}" width="35px"></a>
    		<a href="https://wiki.52poke.com/zh-hant/${pokemon.name}" class="poke52"><b>${pokemon.name}</b></a>
	        <div class="pm-type">
	          ${typesHtml}
	        </div>
	      </li>
	    `;
	  }).join('');
	};

	// 將生成的 <li> 添加到 ul 或 ol 中
	document.querySelector('#pokemon-list').innerHTML = generatePokemonListItems(sortedPokemonData);	



    document.addEventListener("DOMContentLoaded", function () {
        const modal = document.getElementById("exampleModal");
        modal.addEventListener("show.bs.modal", function (event) {
            // 取得觸發模態框的按鈕
            const button = event.relatedTarget;
            
            const name = button.getAttribute("data-name");
            const ability = JSON.parse("[" + button.getAttribute("data-ability") + "]");  // 轉換成數組
            
            // 將數據顯示在模態框中
            const modalTitle = modal.querySelector("#exampleModalLabel");
            const pokeHP = modal.querySelector("#pokeHP");
            const pokeAttack = modal.querySelector("#pokeAttack");
            const pokeDefense = modal.querySelector("#pokeDefense");
            const pokeSpAttack = modal.querySelector("#pokeSpAttack");
            const pokeSpDefense = modal.querySelector("#pokeSpDefense");
            const pokeSpeed = modal.querySelector("#pokeSpeed");

            // 設置名稱和能力值
            modalTitle.textContent = name;
            pokeHP.textContent = ability[0];
            pokeAttack.textContent = ability[1];
            pokeDefense.textContent = ability[2];
            pokeSpAttack.textContent = ability[3];
            pokeSpDefense.textContent = ability[4];
            pokeSpeed.textContent = ability[5];

			// console.log(calculateCombinedResults(button.getAttribute("data-type").split(",")));

			let arr = button.getAttribute("data-type").split(",")
		    if (arr.length === 1) {
		      const results = listDamageMultipliers(arr);
		      displayResults(results, 2);
		    } 
		    // 如果選擇了兩個屬性，顯示所有屬性對這兩個屬性的乘積結果
		    else if (arr.length === 2) {
		      const combinedResults = calculateCombinedResults(arr);
		      displayCombinedResults(combinedResults, 2);
		    }

		    const pokeTypeEle = document.getElementById('pokeType');
	  		let pokeType = `<span class="badge rounded-pill color-${arr[0]}">${arr[0]}</span>&nbsp;<span class="badge rounded-pill color-${arr[1]}">${arr[1]}</span>`;
	  		pokeTypeEle.innerHTML = pokeType;

        });
    });
</script>